/**
 * ä¼ª AI æŠ¥å‘Šç”Ÿæˆå™¨
 * @param {Object} inputData - ç”¨æˆ·çš„æµ‹è¯•ç»“æžœ
 * ç»“æž„ç¤ºä¾‹: { hasDeadPixel: boolean, bleedingSeverity: 'none'|'low'|'high', screenType: 'LCD' }
 */
function generatePseudoAIReport(inputData) {
    // 1. è¯­æ–™åº“ï¼šä¸“ä¸šæœ¯è¯­æ±  (éšæœºæŠ½å–)
    const corpus = {
        // å¼€åœºç™½
        intro: [
            "åŸºäºŽå½“å‰æ˜¾ç¤ºç»ˆç«¯çš„ç‰©ç†ç‰¹æ€§åˆ†æžï¼Œç»“åˆ ISO-13406-2 åƒç´ ç¼ºé™·æ ‡å‡†ï¼Œç”Ÿæˆä»¥ä¸‹æ£€æµ‹æŠ¥å‘Šã€‚",
            "ç³»ç»Ÿå·²å®Œæˆé’ˆå¯¹é¢æ¿çš„è‰²å½©å‡åŒ€æ€§ã€åƒç´ å“åº”åŠæ¼å…‰æƒ…å†µçš„ç»¼åˆæ‰«æï¼Œåˆ†æžç»“æžœå¦‚ä¸‹ã€‚",
            "AI è§†è§‰å¼•æ“Žå·²å¯¹æ‚¨çš„å±å¹•æµ‹è¯•æ•°æ®è¿›è¡Œå¤„ç†ï¼Œä»¥ä¸‹æ˜¯åŸºäºŽç¡¬ä»¶è¡¨çŽ°çš„ä¸“ä¸šè¯„ä¼°ã€‚"
        ],
        // åç‚¹åˆ†æž (å¦‚æžœæœ‰åç‚¹)
        deadPixelBad: [
            "æ£€æµ‹åˆ°é¢æ¿å­˜åœ¨æ´»è·ƒçŸ©é˜µå¼‚å¸¸ï¼ˆActive Matrix Anomalyï¼‰ã€‚è¿™é€šå¸¸è¡¨çŽ°ä¸ºå­åƒç´ æ™¶ä½“ç®¡å¤±æ•ˆï¼ˆStuck/Dead Pixelï¼‰ã€‚",
            "å‘çŽ°å¯è§çš„åƒç´ ç¼ºé™·ç‚¹ã€‚æ ¹æ®è¡Œä¸šæ ‡å‡†ï¼Œè¿™æ˜¯ç”±äºŽ TFT åˆ¶é€ å·¥è‰ºä¸­çš„å¾®å°˜æˆ–æ¿€å…‰åˆ‡å‰²è¯¯å·®å¯¼è‡´çš„ã€‚",
            "å±å¹•å­˜åœ¨éžå‘å…‰æ€§æˆ–å¸¸äº®æ€§åƒç´ ç‚¹ï¼Œå»ºè®®åœ¨é«˜äº®å’Œçº¯é»‘èƒŒæ™¯ä¸‹è¿›è¡ŒäºŒæ¬¡ç¡®è®¤ã€‚"
        ],
        // åç‚¹åˆ†æž (å¦‚æžœæ²¡åç‚¹)
        deadPixelGood: [
            "åœ¨ RGB å…¨è‰²åŸŸæ‰«æä¸­ï¼Œæœªå‘çŽ°ä»»ä½•åç‚¹æˆ–äº®ç‚¹ã€‚åƒç´ é˜µåˆ—å®Œæ•´æ€§æžé«˜ã€‚",
            "åƒç´ ç‚¹æµ‹è¯•é€šè¿‡ã€‚è¯¥é¢æ¿çš„æ™¶ä½“ç®¡è‰¯çŽ‡è¡¨çŽ°ä¼˜ç§€ï¼Œç¬¦åˆ A+ çº§é¢æ¿æ ‡å‡†ã€‚",
            "å…¨å±çº¯è‰²æµ‹è¯•ä¸‹åƒç´ å“åº”æ­£å¸¸ï¼Œæ— è‚‰çœ¼å¯è§çš„åç‚¹ï¼ˆDead Pixelsï¼‰æˆ–äº®ç‚¹ï¼ˆHot Pixelsï¼‰ã€‚"
        ],
        // æ¼å…‰åˆ†æž (è½»å¾®)
        bleedingLow: [
            "è¾¹ç¼˜å­˜åœ¨è½»å¾®çš„å…‰çº¿æº¢å‡ºï¼Œè¿™é€šå¸¸è¢«åˆ¤å®šä¸º IPS è¾‰å…‰ï¼ˆIPS Glowï¼‰ï¼Œå±žäºŽæ¶²æ™¶åˆ†å­æŽ’åˆ—çš„ç‰©ç†ç‰¹æ€§ï¼Œè€Œéžè´¨é‡ç¼ºé™·ã€‚",
            "é»‘è‰²èƒŒæ™¯ä¸‹å¯è§è½»å¾®ä¸å‡åŒ€ï¼Œä½†è¿™åœ¨ä¾§å…¥å¼èƒŒå…‰ï¼ˆEdge-litï¼‰æ˜¾ç¤ºå™¨ä¸­å±žäºŽå¸¸è§çŽ°è±¡ï¼Œä¸å½±å“æ—¥å¸¸äº®å…‰çŽ¯å¢ƒä½¿ç”¨ã€‚",
            "æ£€æµ‹åˆ°å¾®å¼±çš„èƒŒå…‰ä¸å‡åŒ€ï¼Œä½†åœ¨ Delta E è‰²å½©å‡†ç¡®åº¦å…è®¸çš„å…¬å·®èŒƒå›´å†…ã€‚"
        ],
        // æ¼å…‰åˆ†æž (ä¸¥é‡)
        bleedingHigh: [
            "èƒŒå…‰æ¨¡ç»„å­˜åœ¨æ˜Žæ˜¾çš„æ¼å…‰ï¼ˆBacklight Bleedingï¼‰çŽ°è±¡ï¼Œå…‰é€šé‡åœ¨è¾¹æ¡†å¤„æ˜¾è‘—æº¢å‡ºã€‚",
            "å±å¹•é»‘è‰²å‡åŒ€æ€§è¾ƒå·®ï¼Œå­˜åœ¨å¯è§çš„äº‘æ–‘ï¼ˆCloudingï¼‰ã€‚è¿™å¯èƒ½ä¼šå½±å“è§‚çœ‹æš—è‰²è°ƒç”µå½±æˆ–æ¸¸æˆçš„æ²‰æµ¸æ„Ÿã€‚",
            "é¢æ¿å°è£…å·¥è‰ºå¯èƒ½å­˜åœ¨å…¬å·®é—®é¢˜ï¼Œå¯¼è‡´è¾¹æ¡†åŽ‹è¿«æ¶²æ™¶å±‚äº§ç”Ÿäº†ä¸¥é‡çš„æ¼å…‰æ•ˆåº”ã€‚"
        ],
        // æ€»ç»“å»ºè®® (å®Œç¾Ž)
        advicePerfect: [
            "æ­å–œï¼è¿™æ˜¯ä¸€å—ç´ è´¨æžä½³çš„â€œå®Œç¾Žå±â€ã€‚å»ºè®®ä¿ç•™å¹¶äº«å—å®ƒã€‚",
            "ç»¼åˆè¯„åˆ†æžé«˜ï¼Œæ— éœ€è¿›è¡Œä»»ä½•å”®åŽå¤„ç†ã€‚å»ºè®®å°†äº®åº¦è°ƒèŠ‚è‡³ 60-80% ä»¥å»¶é•¿èƒŒå…‰å¯¿å‘½ã€‚",
            "è¯¥å±å¹•é€šè¿‡äº†æ‰€æœ‰å…³é”®æŒ‡æ ‡æµ‹è¯•ï¼Œä½“è´¨ä¼˜ç§€ï¼Œå±žäºŽâ€œé»„é‡‘æ ·æœ¬â€ã€‚"
        ],
        // æ€»ç»“å»ºè®® (ä¸€èˆ¬)
        adviceNormal: [
            "æ€»ä½“è¡¨çŽ°ç¬¦åˆä¸»æµå‡ºåŽ‚æ ‡å‡†ã€‚è½»å¾®çš„ç‘•ç–µåœ¨æ­£å¸¸è§†è·ä¸‹å‡ ä¹Žä¸å¯å¯Ÿè§‰ï¼Œå»ºè®®æ­£å¸¸ä½¿ç”¨ã€‚",
            "è™½ç„¶å­˜åœ¨ç»†å¾®ç‘•ç–µï¼Œä½†åœ¨è¯¥ä»·ä½æ®µå±žäºŽâ€œåˆæ ¼å“â€ã€‚é™¤éžæ‚¨æ˜¯æžè‡´å®Œç¾Žä¸»ä¹‰è€…ï¼Œå¦åˆ™æ— éœ€æŠ˜è…¾æ¢è´§ã€‚",
            "å»ºè®®åœ¨æ—¥å¸¸ä½¿ç”¨ä¸­é¿å…é•¿æ—¶é—´æ˜¾ç¤ºé™æ€å›¾åƒï¼Œä»¥é˜²æ­¢å¹¶æ²¡æœ‰å‘ç”Ÿçš„æ®‹å½±é—®é¢˜ã€‚"
        ],
        // æ€»ç»“å»ºè®® (å·®)
        adviceBad: [
            "é‰´äºŽç¼ºé™·è¾ƒä¸ºæ˜Žæ˜¾ï¼Œä¸¥é‡å½±å“äº†è§†è§‰ä½“éªŒï¼Œå»ºè®®æ‚¨è”ç³»ç»é”€å•†ç”³è¯·å”®åŽæˆ–é€€æ¢è´§ã€‚",
            "è¯¥é¢æ¿çš„å“æŽ§è¡¨çŽ°ä½ŽäºŽè¡Œä¸šå¹³å‡æ°´å¹³ï¼Œå»ºè®®ä¿å­˜æœ¬æŠ¥å‘Šæˆªå›¾ä½œä¸ºé€€æ¢è´§ä¾æ®ã€‚",
            "ä¸ºäº†æ‚¨çš„é•¿æœŸä½¿ç”¨ä½“éªŒï¼Œå»ºè®®å°è¯•ç”³è¯·æ›´æ¢ä¸€å°é¢æ¿ç´ è´¨æ›´å¥½çš„è®¾å¤‡ã€‚"
        ]
    };

    // 2. è¾…åŠ©å‡½æ•°ï¼šéšæœºæŠ½å–
    const pick = (arr) => arr[Math.floor(Math.random() * arr.length)];
    
    // 3. é€»è¾‘åˆ¤æ–­ä¸Žç»„è£…
    let reportContent = [];
    let score = 100;
    let defectCount = 0;

    // æ·»åŠ æŠ¥å‘Šå¤´
    const reportId = "RPT-" + Math.floor(Math.random() * 1000000);
    const dateStr = new Date().toLocaleDateString();
    
    // --- é€»è¾‘å¤„ç† ---
    
    // å¼€åœº
    reportContent.push(`**æ£€æµ‹ç¼–å·ï¼š** ${reportId}`);
    reportContent.push(`**æ£€æµ‹æ—¥æœŸï¼š** ${dateStr}`);
    reportContent.push(`---`);
    reportContent.push(`**å‰è¨€ï¼š** ${pick(corpus.intro)}`);

    // åç‚¹åˆ¤æ–­
    if (inputData.hasDeadPixel) {
        score -= 20;
        defectCount++;
        reportContent.push(`\n**âŒ åƒç´ ç¼ºé™·åˆ†æžï¼š**`);
        reportContent.push(pick(corpus.deadPixelBad));
    } else {
        reportContent.push(`\n**âœ… åƒç´ ç¼ºé™·åˆ†æžï¼š**`);
        reportContent.push(pick(corpus.deadPixelGood));
    }

    // æ¼å…‰åˆ¤æ–­
    reportContent.push(`\n**ðŸ’¡ èƒŒå…‰å‡åŒ€æ€§åˆ†æžï¼š**`);
    if (inputData.bleedingSeverity === 'high') {
        score -= 30;
        defectCount++;
        reportContent.push(pick(corpus.bleedingHigh));
    } else if (inputData.bleedingSeverity === 'low') {
        score -= 5;
        reportContent.push(pick(corpus.bleedingLow));
    } else {
        reportContent.push("èƒŒå…‰æŽ§åˆ¶è‰¯å¥½ï¼Œæ— æ˜Žæ˜¾æ¼å…‰æˆ–è¾‰å…‰çŽ°è±¡ï¼Œé»‘è‰²çº¯å‡€åº¦é«˜ã€‚");
    }

    // ç”Ÿæˆç»“è®º
    reportContent.push(`\n**ðŸ“ ç»¼åˆè¯„ä¼°ä¸Žå»ºè®®ï¼š**`);
    if (score >= 95) {
        reportContent.push(pick(corpus.advicePerfect));
    } else if (score >= 70) {
        reportContent.push(pick(corpus.adviceNormal));
    } else {
        reportContent.push(pick(corpus.adviceBad));
    }

    // 4. è¿”å›žå¯¹è±¡
    return {
        score: score,
        markdown: reportContent.join("\n"),
        isPerfect: score === 100
    };
}